# Docker Compose custom file for Coolify Enhanced
#
# Copy this file to /data/coolify/source/docker-compose.custom.yml
# Then run: bash /data/coolify/source/upgrade.sh
#
# Coolify's install script natively supports docker-compose.custom.yml.

services:
  coolify:
    # Use the enhanced image instead of the official one
    image: ${CUSTOM_COOLIFY_IMAGE:-ghcr.io/amirhmoradi/coolify-enhanced:latest}
    environment:
      # Enable Coolify Enhanced (granular permissions + encrypted backups)
      - COOLIFY_ENHANCED=true
    volumes:
      # Persist custom template cache (same pattern as Coolify's other data mounts)
      - /data/coolify/custom-templates:/var/www/html/storage/app/custom-templates
